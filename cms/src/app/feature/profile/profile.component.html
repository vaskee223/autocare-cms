<div class="p-6">
  <div class="mb-6">
    <h1 class="text-2xl font-bold text-gray-900">
      {{ "profile.title" | translate }}
    </h1>
    <p class="text-gray-500">{{ "profile.description" | translate }}</p>
  </div>

  @if (loading()) {
  <app-form-skeleton [count]="5" />
  } @else {
  <div class="wrapper !p-6">
    <form [formGroup]="form" class="grid grid-cols-12 gap-4">
      <div class="col-span-12 md:col-span-6">
        <label class="secondary-text">
          {{ "profile.fields.firstName" | translate }}
          <span class="text-red-500">*</span>
        </label>
        <input pInputText formControlName="firstName" class="w-full" />
        <app-field-errors
          [errors]="form.get('firstName')?.errors ?? null"
          [control]="form.get('firstName')"
        />
      </div>

      <div class="col-span-12 md:col-span-6">
        <label class="secondary-text">
          {{ "profile.fields.lastName" | translate }}
          <span class="text-red-500">*</span>
        </label>
        <input pInputText formControlName="lastName" class="w-full" />
        <app-field-errors
          [errors]="form.get('lastName')?.errors ?? null"
          [control]="form.get('lastName')"
        />
      </div>

      <div class="col-span-12 md:col-span-6">
        <label class="secondary-text">
          {{ "profile.fields.email" | translate }}
          <span class="text-red-500">*</span>
        </label>
        <input pInputText formControlName="email" type="email" class="w-full" />
        <app-field-errors
          [errors]="form.get('email')?.errors ?? null"
          [control]="form.get('email')"
        />
      </div>

      <div class="col-span-12">
        <hr class="my-2" />
        <p class="text-sm text-gray-500 mb-2">
          {{ "profile.passwordHint" | translate }}
        </p>
      </div>

      <div class="col-span-12 md:col-span-6">
        <label class="secondary-text">
          {{ "profile.fields.password" | translate }}
        </label>
        <p-password
          formControlName="password"
          [toggleMask]="true"
          [feedback]="false"
          styleClass="w-full"
          inputStyleClass="w-full"
        />
      </div>

      <div class="col-span-12 md:col-span-6">
        <label class="secondary-text">
          {{ "profile.fields.passwordConfirm" | translate }}
        </label>
        <p-password
          formControlName="passwordConfirm"
          [toggleMask]="true"
          [feedback]="false"
          styleClass="w-full"
          inputStyleClass="w-full"
        />
      </div>
    </form>

    <div class="flex justify-between mt-6 pt-4 border-t">
      <p-button
        [label]="'profile.deleteAccount' | translate"
        severity="danger"
        [outlined]="true"
        icon="pi pi-trash"
        (onClick)="onDeleteAccount($event)"
      />
      <p-button
        [label]="'buttons.save' | translate"
        (onClick)="onSubmit()"
        [loading]="saving()"
      />
    </div>
  </div>
  }
</div>

<p-confirmpopup />
